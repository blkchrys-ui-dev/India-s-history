<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>History Timeline Slider</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,700&family=Roboto:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      user-select: none;
    }
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #1b1b1b;
      color: #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
    }

    .slider-container {
      position: relative;
      width: 80%;
      max-width: 1000px;
      height: 500px;
      overflow: hidden;
      border-radius: 12px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.7);
      background-color: #000;
    }

    .slider {
      display: flex;
      height: 100%;
      transition: transform 0.8s cubic-bezier(0.65, 0.05, 0.36, 1);
    }

    .slide {
      min-width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
    }

    .slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* parallax effect scale */
      transform: scale(1.1);
      transition: transform 1.2s ease;
    }

    .slide.active img {
      transform: scale(1); 
    }

    .caption {
      position: absolute;
      bottom: 40px;
      left: 40px;
      background: rgba(0,0,0,0.6);
      padding: 15px 25px;
      border-radius: 8px;
      font-family: 'Playfair Display', serif;
      font-size: 1.6rem;
      color: #f0e6d2;
      line-height: 1.2;
      max-width: 60%;
    }

    .caption .date {
      font-size: 1.2rem;
      font-weight: 500;
      color: #cccccc;
      margin-bottom: 5px;
    }

    .navigation {
      position: absolute;
      width: 100%;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      z-index: 10;
      pointer-events: none;
    }

    .navigation .arrow {
      pointer-events: all;
      font-size: 3rem;
      color: #ffffff;
      background: rgba(0,0,0,0.4);
      padding: 10px 15px;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s ease;
      user-select: none;
    }

    .slider-container:hover .arrow,
    .slider-container:focus-within .arrow {
      opacity: 1;
    }

    .dots {
      position: absolute;
      bottom: 20px;
      width: 100%;
      text-align: center;
      z-index: 5;
    }

    .dot {
      display: inline-block;
      width: 14px;
      height: 14px;
      margin: 0 6px;
      border: 2px solid #f0e6d2;
      border-radius: 50%;
      background: transparent;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .dot.active {
      background-color: #f0e6d2;
      transform: scale(1.3);
    }

    .progress-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 4px;
      background: #f0e6d2;
      width: 0%;
      transition: width 0.8s ease;
      z-index: 5;
    }

    @media (max-width: 768px) {
      .caption {
        font-size: 1.2rem;
        bottom: 20px;
        left: 20px;
        padding: 10px 15px;
      }
      .navigation .arrow {
        font-size: 2.2rem;
        padding: 8px 12px;
      }
    }

  </style>
</head>
<body>
  <div class="slider-container" tabindex="0">
    <div class="slider" id="slider">
      <!-- Slide 1 -->
      <div class="slide">
        <img data-src="https://picsum.photos/id/1015/1200/700" alt="Battle of Hastings 1066" class="lazy">
        <div class="caption">
          <div class="date">1066</div>
          <div class="title">Battle of Hastings</div>
        </div>
      </div>
      <!-- Slide 2 -->
      <div class="slide">
        <img data-src="https://picsum.photos/id/1018/1200/700" alt="Magna Carta Signing 1215" class="lazy">
        <div class="caption">
          <div class="date">1215</div>
          <div class="title">Magna Carta Signed</div>
        </div>
      </div>
      <!-- Slide 3 -->
      <div class="slide">
        <img data-src="https://picsum.photos/id/1025/1200/700" alt="Renaissance Period" class="lazy">
        <div class="caption">
          <div class="date">1500s</div>
          <div class="title">The Renaissance</div>
        </div>
      </div>
      <!-- Slide 4 -->
      <div class="slide">
        <img data-src="https://picsum.photos/id/1035/1200/700" alt="Industrial Revolution" class="lazy">
        <div class="caption">
          <div class="date">1800s</div>
          <div class="title">Industrial Revolution</div>
        </div>
      </div>
       <div class="slide">
        <img data-src="https://picsum.photos/id/1035/1200/700" alt="Industrial Revolution" class="lazy">
        <div class="caption">
          <div class="date">1900s</div>
          <div class="title">Industrial Revolution</div>
        </div>
      </div>
       <div class="slide">
        <img data-src="https://picsum.photos/id/1035/1200/700" alt="Industrial Revolution" class="lazy">
        <div class="caption">
          <div class="date">2000s</div>
          <div class="title">Industrial Revolution</div>
        </div>
      </div>
    </div>

    <div class="navigation">
      <div class="arrow prev">&#10094;</div>
      <div class="arrow next">&#10095;</div>
    </div>

    <div class="dots" id="dots"></div>
    <div class="progress-bar" id="progress"></div>
  </div>

  <script>
    (function(){
      const slider = document.getElementById('slider');
      const slides = slider.querySelectorAll('.slide');
      const prevBtn = document.querySelector('.prev');
      const nextBtn = document.querySelector('.next');
      const dotsContainer = document.getElementById('dots');
      const progressBar = document.getElementById('progress');
      const container = document.querySelector('.slider-container');
      let current = 0;
      const total = slides.length;
      let autoInterval;
      const autoTime = 5000;

      // Lazy load images
      slides.forEach(slide => {
        const img = slide.querySelector('img.lazy');
        const src = img.getAttribute('data-src');
        if (src) {
          img.src = src;
          img.onload = () => img.classList.remove('lazy');
        }
      });

      function createDots(){
        slides.forEach((_, idx) => {
          const dot = document.createElement('span');
          dot.classList.add('dot');
          dot.dataset.index = idx;
          dotsContainer.appendChild(dot);
        });
      }

      function updateUI(idx){
        // Slide transform
        slider.style.transform = `translateX(-${idx * 100}%)`;
        // Active class for captions/image scaling
        slides.forEach((s, i) => {
          s.classList.toggle('active', i === idx);
        });
        // Dots
        const dots = dotsContainer.children;
        for (let i = 0; i < dots.length; i++) {
          dots[i].classList.toggle('active', i === idx);
        }
        // Progress bar
        const percent = ((idx + 1) / total) * 100;
        progressBar.style.width = `${percent}%`;
        current = idx;
      }

      function nextSlide(){
        const newIndex = (current + 1) % total;
        updateUI(newIndex);
      }

      function prevSlide(){
        // For infinite forward-only, prev may also do wrap but you can disable prev arrow (optional)
        const newIndex = (current - 1 + total) % total;
        updateUI(newIndex);
      }

      function startAuto(){
        autoInterval = setInterval(nextSlide, autoTime);
      }

      function stopAuto(){
        clearInterval(autoInterval);
      }

      // Event listeners
      nextBtn.addEventListener('click', () => {
        nextSlide();
        stopAuto();
        startAuto();
      });
      prevBtn.addEventListener('click', () => {
        // If you want disable reverse, just treat prev the same as next
        nextSlide();
        stopAuto();
        startAuto();
      });

      dotsContainer.addEventListener('click', (e) => {
        if (e.target.classList.contains('dot')) {
          const idx = parseInt(e.target.dataset.index);
          updateUI(idx);
          stopAuto();
          startAuto();
        }
      });

      // Swipe / drag support
      let startX = 0;
      let isDragging = false;
      container.addEventListener('touchstart', e => {
        startX = e.touches[0].clientX;
        isDragging = true;
        stopAuto();
      });

      container.addEventListener('touchmove', e => {
        if (!isDragging) return;
        const x = e.touches[0].clientX;
        const diff = x - startX;
        // Optionally you can show move feedback
      });

      container.addEventListener('touchend', e => {
        if (!isDragging) return;
        const endX = e.changedTouches[0].clientX;
        const diff = endX - startX;
        if (diff < -40) { // swipe left
          nextSlide();
        } else {
          // swipe right also treated as forward (infinite forward-only)
          nextSlide();
        }
        isDragging = false;
        startAuto();
      });

      // Keyboard navigation
      container.addEventListener('keyup', e => {
        if (e.key === 'ArrowRight' || e.key === 'ArrowLeft' || e.key === 'Enter') {
          nextSlide();
          stopAuto();
          startAuto();
        }
      });

      // Pause on hover
      container.addEventListener('mouseenter', stopAuto);
      container.addEventListener('mouseleave', startAuto);

      // Initialization
      createDots();
      updateUI(0);
      startAuto();
      // Make container focusable to capture keyboard
      container.focus();
    })();
  </script>
</body>
</html>
